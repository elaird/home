# https://twiki.cern.ch/twiki/bin/viewauth/CMS/ClusterUsersGuide

HOST lxplus* *.cern.ch *.fnal.gov
    GSSAPITrustDns yes
    GSSAPIAuthentication yes
    GSSAPIDelegateCredentials yes

Host cmsusr cmsusr* cmsusr*.cms
     Protocol 2
     ForwardAgent yes
     #ForwardX11 yes
     #ForwardX11Trusted no

     ProxyCommand ssh lxplus.cern.ch nc %h 22

     # Setup a SOCKS5 proxy on local port 1080 so that you can easily browse internal CMS web sites
     DynamicForward 1080

     # LocalForward 4022 cmsnx0:22
     # LocalForward 4122 cmsnx1:22
     # LocalForward 4222 cmsnx2:22
     # LocalForward 4322 cmsnx3:22
     # LocalForward 4422 cmsnx4:22

Host cms904usr*
     Protocol 2
     ForwardAgent yes
     #ForwardX11 yes
     #ForwardX11Trusted no

     ProxyCommand ssh lxplus.cern.ch nc %h 22
     # Setup a SOCKS5 proxy on local port 1081 so that you can easily browse internal 904 web sites
     DynamicForward 1081

ControlMaster auto
ControlPath ~/.ssh/master_%l_%h_%p_%r
